<!DOCTYPE html>

<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystic Tarot v4.0: Full Deck</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400&display=swap');

```
    :root {
        --bg-color: #0f0f13;
        --accent: #d4af37;
        --accent-dim: #8a7020;
        --text-main: #e0e0e0;
        --card-width: 130px; 
        --card-height: 220px;
    }

    body {
        background-color: var(--bg-color);
        color: var(--text-main);
        font-family: 'Lato', sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
        overflow-x: hidden;
    }

    h1 {
        font-family: 'Cinzel', serif;
        color: var(--accent);
        text-transform: uppercase;
        letter-spacing: 3px;
        text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        margin-bottom: 10px;
    }

    .controls {
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 100%;
        max-width: 600px;
        margin-bottom: 20px;
        z-index: 10;
        align-items: center;
        background: rgba(20, 20, 25, 0.8);
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #333;
    }

    input[type="text"], select {
        width: 90%;
        padding: 12px;
        background: #1a1a1a;
        border: 1px solid #444;
        color: white;
        border-radius: 4px;
        font-family: 'Lato', sans-serif;
        outline: none;
        text-align: center;
        transition: 0.3s;
    }
    
    input[type="text"]:focus, select:focus { border-color: var(--accent); }

    .shuffle-duration {
        width: 90%;
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .shuffle-duration label {
        font-size: 0.85em;
        color: #aaa;
        text-align: center;
    }

    input[type="range"] {
        width: 100%;
        height: 6px;
        background: #333;
        outline: none;
        border-radius: 3px;
        -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        background: var(--accent);
        cursor: pointer;
        border-radius: 50%;
    }

    input[type="range"]::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: var(--accent);
        cursor: pointer;
        border-radius: 50%;
        border: none;
    }

    .duration-value {
        color: var(--accent);
        font-weight: bold;
    }

    .btn-group {
        display: flex;
        gap: 10px;
        width: 100%;
        justify-content: center;
    }

    button {
        padding: 12px 20px;
        font-family: 'Cinzel', serif;
        cursor: pointer;
        text-transform: uppercase;
        font-weight: bold;
        transition: 0.3s;
        border-radius: 4px;
        border: 1px solid var(--accent);
    }

    button.shuffle-btn {
        background: transparent;
        color: var(--accent);
    }

    button.shuffle-btn:hover {
        background: rgba(212, 175, 55, 0.1);
        box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
    }

    button.reset-btn {
        background: #333;
        color: #888;
        border-color: #555;
        font-size: 0.8em;
    }
    button.reset-btn:hover { background: #444; color: white; }

    .deck-zone {
        height: 260px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
    }

    .deck-container {
        position: relative;
        width: var(--card-width);
        height: var(--card-height);
        cursor: pointer;
        transition: 0.3s;
    }
    
    .deck-container.locked {
        opacity: 0.5;
        pointer-events: none;
        filter: grayscale(100%);
    }

    .deck-card {
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(45deg, #181825, #181825 10px, #252538 10px, #252538 20px);
        border: 2px solid var(--accent);
        border-radius: 10px;
        position: absolute;
        top: 0; left: 0;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.3s ease;
    }
    
    .deck-card::after { content: '‚ú¶'; font-size: 40px; color: var(--accent); opacity: 0.4; }

    @keyframes shuffleLeft {
        0% { transform: translate(0, 0) rotate(0deg); }
        50% { transform: translate(-60px, -10px) rotate(-5deg); }
        100% { transform: translate(0, 0) rotate(0deg); }
    }
    @keyframes shuffleRight {
        0% { transform: translate(0, 0) rotate(0deg); }
        50% { transform: translate(60px, 10px) rotate(5deg); }
        100% { transform: translate(0, 0) rotate(0deg); }
    }

    .shuffling .c1 { animation: shuffleLeft 0.5s ease-in-out; }
    .shuffling .c2 { animation: shuffleRight 0.5s ease-in-out; }
    .shuffling .c3 { animation: shuffleLeft 0.5s ease-in-out reverse; }

    .deck-instruction {
        margin-top: 15px;
        font-size: 0.9em;
        color: var(--accent);
        font-style: italic;
        opacity: 0;
        transition: opacity 0.5s;
    }

    .spread-area {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
        width: 100%;
        max-width: 1200px;
        min-height: 200px;
        padding-bottom: 50px;
    }

    .card-slot {
        width: var(--card-width);
        display: flex;
        flex-direction: column;
        align-items: center;
        opacity: 0;
        animation: fadeIn 0.8s forwards;
        margin-bottom: 20px;
    }
    @keyframes fadeIn { to { opacity: 1; } }

    .card-inner {
        width: var(--card-width);
        height: var(--card-height);
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.8s;
        cursor: pointer;
    }
    .card-inner.flipped { transform: rotateY(180deg); }
    .card-inner.reversed { transform: rotateY(180deg) rotate(180deg); }
    .card-inner.flipped.reversed { transform: rotateY(360deg) rotate(180deg); }
    
    .card-front, .card-back {
        position: absolute; width: 100%; height: 100%;
        backface-visibility: hidden; border-radius: 10px; border: 2px solid var(--accent);
    }
    .card-front { background: repeating-linear-gradient(45deg, #181825, #181825 10px, #252538 10px, #252538 20px); display: flex; align-items: center; justify-content: center; }
    .card-front::after { content: '‚ú¶'; font-size: 40px; color: var(--accent); }
    .card-back { background: #000; transform: rotateY(180deg); background-size: cover; background-position: center; }

    .card-meaning {
        margin-top: 10px;
        font-size: 0.8em;
        text-align: center;
        background: rgba(0,0,0,0.8);
        padding: 10px;
        border-radius: 5px;
        border-top: 1px solid var(--accent);
        display: none;
        width: 100%;
        box-sizing: border-box;
        color: #ccc;
    }
    .card-meaning strong { color: var(--accent); display: block; margin-bottom: 5px; font-family: 'Cinzel';}
    .card-meaning.reversed-indicator { border-top: 2px solid #c44; }
    .card-meaning.reversed-indicator strong::after { content: " (–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞)"; font-size: 0.8em; color: #c44; }

    .position-label {
        font-family: 'Cinzel', serif;
        font-size: 0.7em;
        color: #888;
        margin-bottom: 5px;
        text-transform: uppercase;
        text-align: center;
        height: 30px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
    }

    .output-zone {
        width: 90%;
        max-width: 800px;
        background: #151515;
        padding: 20px;
        border: 1px solid #333;
        border-radius: 8px;
        display: none;
        margin-bottom: 50px;
    }
    textarea { 
        width: 100%; 
        height: auto; 
        min-height: 200px;
        background: #0a0a0a; 
        color: #aaa; 
        border: 1px solid #333; 
        resize: vertical; 
        box-sizing: border-box; 
        padding: 15px; 
        font-family: monospace; 
        white-space: pre-wrap;
    }
    .copy-btn { margin-top: 10px; padding: 12px 30px; background: var(--accent); color: #000; border: none; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; font-weight: bold; width: 100%; }
    .copy-btn:hover { background: white; }

</style>
```

</head>
<body>

```
<h1>Oracle ‚ú¶ Gemini</h1>

<div class="controls">
    <input type="text" id="userQuestion" placeholder="–¢–≤–æ—î –ø–∏—Ç–∞–Ω–Ω—è –¥–æ –í—Å–µ—Å–≤—ñ—Ç—É...">
    
    <select id="spreadSelector">
        <option value="1">‚ú¶ –ë–ª—ñ—Ü (1 –∫–∞—Ä—Ç–∞)</option>
        <option value="3" selected>‚ú¶ –¢—Ä–∏ –∫–∞—Ä—Ç–∏ (–ú–∏–Ω—É–ª–µ/–¢–µ–ø–µ—Ä./–ú–∞–π–±.)</option>
        <option value="3_alt">‚ú¶ –†–æ–∑—É–º / –°–µ—Ä—Ü–µ / –î—ñ—ó (3 –∫–∞—Ä—Ç–∏)</option>
        <option value="5">‚ú¶ –®–ª—è—Ö (5 –∫–∞—Ä—Ç)</option>
        <option value="7">‚ú¶ –í–µ–ª–∏–∫–∞ –°–µ–º—ñ—Ä–∫–∞ (7 –∫–∞—Ä—Ç ‚Äî –≤–∏–±—ñ—Ä –ø–æ —á–µ—Ä–∑—ñ)</option>
        <option value="10">‚ú¶ –ö–ï–õ–¨–¢–°–¨–ö–ò–ô –•–†–ï–°–¢ (10 –∫–∞—Ä—Ç)</option>
    </select>

    <div class="shuffle-duration">
        <label>‚è± –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Ç–∞—Å—É–≤–∞–Ω–Ω—è: <span class="duration-value" id="durationValue">1.5</span> —Å–µ–∫</label>
        <input type="range" id="shuffleDuration" min="0.5" max="5" step="0.5" value="1.5">
    </div>

    <div class="btn-group">
        <button class="shuffle-btn" onclick="startShuffle()">üñê –ü–µ—Ä–µ—Ç–∞—Å—É–≤–∞—Ç–∏ –∫–æ–ª–æ–¥—É</button>
        <button class="reset-btn" onclick="resetAll()">–°–∫–∏–Ω—É—Ç–∏</button>
    </div>
</div>

<div class="deck-zone">
    <div class="deck-container locked" id="deckContainer" onclick="drawCard()">
        <div class="deck-card c1"></div>
        <div class="deck-card c2" style="transform: translate(2px, 2px);"></div>
        <div class="deck-card c3" style="transform: translate(4px, 4px);"></div>
        <div class="deck-card" style="transform: translate(6px, 6px);"></div>
    </div>
    <div class="deck-instruction" id="deckInst">–ö–æ–ª–æ–¥–∞ –≥–æ—Ç–æ–≤–∞. –¢—è–≥–Ω–∏ –∫–∞—Ä—Ç–∏! (<span id="countDisplay">0</span>/<span id="totalDisplay">0</span>)</div>
</div>

<div class="spread-area" id="spreadArea"></div>

<div class="output-zone" id="outputZone">
    <h3 style="margin-top:0; color:var(--accent); font-family:'Cinzel'">‚ú¶ –¢–≤—ñ–π –†–æ–∑–∫–ª–∞–¥ ‚ú¶</h3>
    <textarea id="resultText" readonly></textarea>
    <button class="copy-btn" onclick="copyResult()">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –≤—Å–µ</button>
</div>
```

<script>
    const tarotDeck = [
        // –°—Ç–∞—Ä—à—ñ –∞—Ä–∫–∞–Ω–∏ (Major Arcana)
        { name: "The Fool (–ë–ª–∞–∑–µ–Ω—å)", img: "https://upload.wikimedia.org/wikipedia/commons/9/90/RWS_Tarot_00_Fool.jpg", meaning: "–ù–æ–≤–∏–π —Å—Ç–∞—Ä—Ç, –Ω–∞—ó–≤–Ω—ñ—Å—Ç—å, —Ä–∏–∑–∏–∫." },
        { name: "The Magician (–ú–∞–≥)", img: "https://upload.wikimedia.org/wikipedia/commons/d/de/RWS_Tarot_01_Magician.jpg", meaning: "–î—ñ—è, –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∞—Ü—ñ—è, —Å–∏–ª–∞ –≤–æ–ª—ñ." },
        { name: "The High Priestess (–ñ—Ä–∏—Ü—è)", img: "https://upload.wikimedia.org/wikipedia/commons/8/88/RWS_Tarot_02_High_Priestess.jpg", meaning: "–Ü–Ω—Ç—É—ó—Ü—ñ—è, —Ç–∞—î–º–Ω–∏—Ü—è, –ø—ñ–¥—Å–≤—ñ–¥–æ–º—ñ—Å—Ç—å." },
        { name: "The Empress (–Ü–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü—è)", img: "https://upload.wikimedia.org/wikipedia/commons/d/d2/RWS_Tarot_03_Empress.jpg", meaning: "–†–æ–¥—é—á—ñ—Å—Ç—å, –ø—Ä–∏—Ä–æ–¥–∞, –∫–æ–º—Ñ–æ—Ä—Ç." },
        { name: "The Emperor (–Ü–º–ø–µ—Ä–∞—Ç–æ—Ä)", img: "https://upload.wikimedia.org/wikipedia/commons/c/c3/RWS_Tarot_04_Emperor.jpg", meaning: "–í–ª–∞–¥–∞, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å." },
        { name: "The Hierophant (–Ü—î—Ä–æ—Ñ–∞–Ω—Ç)", img: "https://upload.wikimedia.org/wikipedia/commons/8/8d/RWS_Tarot_05_Hierophant.jpg", meaning: "–¢—Ä–∞–¥–∏—Ü—ñ—è, –º–æ—Ä–∞–ª—å, –Ω–∞–≤—á–∞–Ω–Ω—è." },
        { name: "The Lovers (–ó–∞–∫–æ—Ö–∞–Ω—ñ)", img: "https://upload.wikimedia.org/wikipedia/commons/3/3a/RWS_Tarot_06_Lovers.jpg", meaning: "–õ—é–±–æ–≤, –≤–∏–±—ñ—Ä, –≥–∞—Ä–º–æ–Ω—ñ—è." },
        { name: "The Chariot (–ö–æ–ª—ñ—Å–Ω–∏—Ü—è)", img: "https://upload.wikimedia.org/wikipedia/commons/9/9b/RWS_Tarot_07_Chariot.jpg", meaning: "–í–æ–ª—è, –ø–µ—Ä–µ–º–æ–≥–∞, —Ä—É—Ö." },
        { name: "Strength (–°–∏–ª–∞)", img: "https://upload.wikimedia.org/wikipedia/commons/f/f5/RWS_Tarot_08_Strength.jpg", meaning: "–¢–µ—Ä–ø—ñ–Ω–Ω—è, –º'—è–∫–∞ —Å–∏–ª–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å." },
        { name: "The Hermit (–í—ñ–¥–ª—é–¥–Ω–∏–∫)", img: "https://upload.wikimedia.org/wikipedia/commons/4/4d/RWS_Tarot_09_Hermit.jpg", meaning: "–°–∞–º–æ—Ç–Ω—ñ—Å—Ç—å, –º—É–¥—Ä—ñ—Å—Ç—å, –ø–æ—à—É–∫." },
        { name: "Wheel of Fortune (–ö–æ–ª–µ—Å–æ)", img: "https://upload.wikimedia.org/wikipedia/commons/3/3c/RWS_Tarot_10_Wheel_of_Fortune.jpg", meaning: "–î–æ–ª—è, –∑–º—ñ–Ω–∏, —É–¥–∞—á–∞." },
        { name: "Justice (–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ñ—Å—Ç—å)", img: "https://upload.wikimedia.org/wikipedia/commons/e/e0/RWS_Tarot_11_Justice.jpg", meaning: "–ü—Ä–∞–≤–¥–∞, –∑–∞–∫–æ–Ω, –∫–∞—Ä–º–∞." },
        { name: "The Hanged Man (–ü–æ–≤—ñ—à–µ–Ω–∏–π)", img: "https://upload.wikimedia.org/wikipedia/commons/2/2b/RWS_Tarot_12_Hanged_Man.jpg", meaning: "–ñ–µ—Ä—Ç–≤–∞, –ø–∞—É–∑–∞, —ñ–Ω—à–∏–π –∫—É—Ç –∑–æ—Ä—É." },
        { name: "Death (–°–º–µ—Ä—Ç—å)", img: "https://upload.wikimedia.org/wikipedia/commons/d/d7/RWS_Tarot_13_Death.jpg", meaning: "–ö—ñ–Ω–µ—Ü—å, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è, –ø–µ—Ä–µ—Ö—ñ–¥." },
        { name: "Temperance (–ü–æ–º—ñ—Ä–Ω—ñ—Å—Ç—å)", img: "https://upload.wikimedia.org/wikipedia/commons/f/f8/RWS_Tarot_14_Temperance.jpg", meaning: "–ë–∞–ª–∞–Ω—Å, –∑—Ü—ñ–ª–µ–Ω–Ω—è, –∫–æ–º–ø—Ä–æ–º—ñ—Å." },
        { name: "The Devil (–î–∏—è–≤–æ–ª)", img: "https://upload.wikimedia.org/wikipedia/commons/5/55/RWS_Tarot_15_Devil.jpg", meaning: "–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å, –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–∑–º, —Ç—ñ–Ω—å." },
        { name: "The Tower (–í–µ–∂–∞)", img: "https://upload.wikimedia.org/wikipedia/commons/5/53/RWS_Tarot_16_Tower.jpg", meaning: "–ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞, —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è, —ñ–Ω—Å–∞–π—Ç." },
        { name: "The Star (–ó—ñ—Ä–∫–∞)", img: "https://upload.wikimedia.org/wikipedia/commons/d/db/RWS_Tarot_17_Star.jpg", meaning: "–ù–∞–¥—ñ—è, –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è, –≤—ñ—Ä–∞." },
        { name: "The Moon (–ú—ñ—Å—è—Ü—å)", img: "https://upload.wikimedia.org/wikipedia/commons/7/7f/RWS_Tarot_18_Moon.jpg", meaning: "–Ü–ª—é–∑—ñ—è, —Å—Ç—Ä–∞—Ö, –Ω–µ–≤—ñ–¥–æ–º–µ." },
        { name: "The Sun (–°–æ–Ω—Ü–µ)", img: "https://upload.wikimedia.org/wikipedia/commons/1/17/RWS_Tarot_19_Sun.jpg", meaning: "–†–∞–¥—ñ—Å—Ç—å, —É—Å–ø—ñ—Ö, —è—Å–Ω—ñ—Å—Ç—å." },
        { name: "Judgement (–°—É–¥)", img: "https://upload.wikimedia.org/wikipedia/commons/d/dd/RWS_Tarot_20_Judgement.jpg", meaning: "–í—ñ–¥—Ä–æ–¥–∂–µ–Ω–Ω—è, –ø—Ä–æ—â–µ–Ω–Ω—è, –ø–æ–∫–ª–∏–∫." },
        { name: "The World (–°–≤—ñ—Ç)", img: "https://upload.wikimedia.org/wikipedia/commons/f/ff/RWS_Tarot_21_World.jpg", meaning: "–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è, —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å, –ø–æ–¥–æ—Ä–æ–∂." },
        
        // –ú–µ—á—ñ (Swords)
        { name: "Ace of Swords (–¢—É–∑ –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/1/1a/Swords01.jpg", meaning: "–Ø—Å–Ω—ñ—Å—Ç—å, –Ω–æ–≤–∞ —ñ–¥–µ—è, –ø—Ä–∞–≤–¥–∞." },
        { name: "Two of Swords (2 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/9/9e/Swords02.jpg", meaning: "–í–∏–±—ñ—Ä, –ø–∞—Ç–æ–≤–∞ —Å–∏—Ç—É–∞—Ü—ñ—è, –±–ª–æ–∫—É–≤–∞–Ω–Ω—è." },
        { name: "Three of Swords (3 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/0/0e/Swords03.jpg", meaning: "–ë—ñ–ª—å, —Ä–æ–∑–±–∏—Ç–µ —Å–µ—Ä—Ü–µ, —Å–º—É—Ç–æ–∫." },
        { name: "Four of Swords (4 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/b/bf/Swords04.jpg", meaning: "–í—ñ–¥–ø–æ—á–∏–Ω–æ–∫, –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è, –ø–∞—É–∑–∞." },
        { name: "Five of Swords (5 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/2/23/Swords05.jpg", meaning: "–ö–æ–Ω—Ñ–ª—ñ–∫—Ç, –ø–æ—Ä–∞–∑–∫–∞, –Ω–µ—á–µ—Å–Ω—ñ—Å—Ç—å." },
        { name: "Six of Swords (6 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/2/29/Swords06.jpg", meaning: "–ü–µ—Ä–µ—Ö—ñ–¥, –ø–æ–¥–æ—Ä–æ–∂, –∑–∞–ª–∏—à–µ–Ω–Ω—è –ø–æ–∑–∞–¥—É." },
        { name: "Seven of Swords (7 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/3/34/Swords07.jpg", meaning: "–û–±–º–∞–Ω, —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è, –∫—Ä–∞–¥—ñ–∂–∫–∞." },
        { name: "Eight of Swords (8 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/a/a7/Swords08.jpg", meaning: "–û–±–º–µ–∂–µ–Ω–Ω—è, –≤—ñ–¥—á—É—Ç—Ç—è –ø–∞—Å—Ç–∫–∏, –±–µ–∑–ø–æ—Ä–∞–¥–Ω—ñ—Å—Ç—å." },
        { name: "Nine of Swords (9 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/2/2f/Swords09.jpg", meaning: "–¢—Ä–∏–≤–æ–≥–∞, –∫–æ—à–º–∞—Ä–∏, —Å—Ç—Ä–∞—Ö." },
        { name: "Ten of Swords (10 –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/d/d4/Swords10.jpg", meaning: "–ö—ñ–Ω–µ—Ü—å, –∑—Ä–∞–¥–∞, –¥–Ω–æ." },
        { name: "Page of Swords (–ü–∞–∂ –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/4/4c/Swords11.jpg", meaning: "–¶—ñ–∫–∞–≤—ñ—Å—Ç—å, –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è, —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è." },
        { name: "Knight of Swords (–õ–∏—Ü–∞—Ä –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/b/b0/Swords12.jpg", meaning: "–î—ñ—è, —ñ–º–ø—É–ª—å—Å–∏–≤–Ω—ñ—Å—Ç—å, –ø—Ä—è–º–æ–ª—ñ–Ω—ñ–π–Ω—ñ—Å—Ç—å." },
        { name: "Queen of Swords (–ö–æ—Ä–æ–ª–µ–≤–∞ –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/d/d4/Swords13.jpg", meaning: "–ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å, –æ–±'—î–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, –ø—Ä–æ–Ω–∏–∫–ª–∏–≤—ñ—Å—Ç—å." },
        { name: "King of Swords (–ö–æ—Ä–æ–ª—å –ú–µ—á—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/3/33/Swords14.jpg", meaning: "–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç, —ñ–Ω—Ç–µ–ª–µ–∫—Ç, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ñ—Å—Ç—å." },

        // –ö—É–±–∫–∏ (Cups)
        { name: "Ace of Cups (–¢—É–∑ –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/3/36/Cups01.jpg", meaning: "–ù–æ–≤–∞ –ª—é–±–æ–≤, –µ–º–æ—Ü—ñ—ó, –ø–æ—á–∞—Ç–æ–∫." },
        { name: "Two of Cups (2 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/f/f4/Cups02.jpg", meaning: "–ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ, –∑—É—Å—Ç—Ä—ñ—á, –∫–æ—Ö–∞–Ω–Ω—è." },
        { name: "Three of Cups (3 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/7/7a/Cups03.jpg", meaning: "–°–≤—è—Ç–∫—É–≤–∞–Ω–Ω—è, –¥—Ä—É–∂–±–∞, —Ä–∞–¥—ñ—Å—Ç—å." },
        { name: "Four of Cups (4 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/3/35/Cups04.jpg", meaning: "–ê–ø–∞—Ç—ñ—è, —Ä–æ–∑–¥—É–º–∏, –º–µ–¥–∏—Ç–∞—Ü—ñ—è." },
        { name: "Five of Cups (5 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/d/d7/Cups05.jpg", meaning: "–í—Ç—Ä–∞—Ç–∞, –≥–æ—Ä–µ, –∑–æ—Å–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –Ω–∞ –Ω–µ–≥–∞—Ç–∏–≤—ñ." },
        { name: "Six of Cups (6 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/1/17/Cups06.jpg", meaning: "–ù–æ—Å—Ç–∞–ª—å–≥—ñ—è, –¥–∏—Ç–∏–Ω—Å—Ç–≤–æ, —Å–ø–æ–≥–∞–¥–∏." },
        { name: "Seven of Cups (7 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/a/ae/Cups07.jpg", meaning: "–í–∏–±—ñ—Ä, —ñ–ª—é–∑—ñ—ó, –º—Ä—ñ—ó." },
        { name: "Eight of Cups (8 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/6/60/Cups08.jpg", meaning: "–í—ñ–¥—Ö—ñ–¥, –ø–æ—à—É–∫ —Å–µ–±–µ, –∑–∞–ª–∏—à–µ–Ω–Ω—è." },
        { name: "Nine of Cups (9 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/2/24/Cups09.jpg", meaning: "–ó–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è, –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±–∞–∂–∞–Ω—å, —â–∞—Å—Ç—è." },
        { name: "Ten of Cups (10 –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/8/84/Cups10.jpg", meaning: "–ì–∞—Ä–º–æ–Ω—ñ—è, —Ä–æ–¥–∏–Ω–∞, –≤–∏–∫–æ–Ω–∞–Ω–Ω—è." },
        { name: "Page of Cups (–ü–∞–∂ –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/a/ad/Cups11.jpg", meaning: "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å, —ñ–Ω—Ç—É—ó—Ü—ñ—è, –Ω–æ–≤—ñ –µ–º–æ—Ü—ñ—ó." },
        { name: "Knight of Cups (–õ–∏—Ü–∞—Ä –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/f/fa/Cups12.jpg", meaning: "–†–æ–º–∞–Ω—Ç–∏–∫–∞, —à–∞—Ä–º, —ñ–¥–µ–∞–ª—ñ–∑–º." },
        { name: "Queen of Cups (–ö–æ—Ä–æ–ª–µ–≤–∞ –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/6/62/Cups13.jpg", meaning: "–ï–º–ø–∞—Ç—ñ—è, —ñ–Ω—Ç—É—ó—Ü—ñ—è, –ø—ñ–∫–ª—É–≤–∞–Ω–Ω—è." },
        { name: "King of Cups (–ö–æ—Ä–æ–ª—å –ö—É–±–∫—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/0/04/Cups14.jpg", meaning: "–ï–º–æ—Ü—ñ–π–Ω–∞ –∑—Ä—ñ–ª—ñ—Å—Ç—å, –º—É–¥—Ä—ñ—Å—Ç—å, —Å–ø–æ–∫—ñ–π." },

        // –ñ–µ–∑–ª–∏ (Wands)
        { name: "Ace of Wands (–¢—É–∑ –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/1/11/Wands01.jpg", meaning: "–ù–∞—Ç—Ö–Ω–µ–Ω–Ω—è, –Ω–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ, —Ç–≤–æ—Ä—á—ñ—Å—Ç—å." },
        { name: "Two of Wands (2 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/0/0f/Wands02.jpg", meaning: "–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è, —Ä—ñ—à–µ–Ω–Ω—è, –º–∞–π–±—É—Ç–Ω—î." },
        { name: "Three of Wands (3 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/f/ff/Wands03.jpg", meaning: "–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è, –ø—Ä–æ–≥—Ä–µ—Å, –¥–∞–ª—å–Ω—ñ—Å—Ç—å –±–∞—á–µ–Ω–Ω—è." },
        { name: "Four of Wands (4 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/a/a4/Wands04.jpg", meaning: "–°–≤—è—Ç–∫—É–≤–∞–Ω–Ω—è, —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å, –¥—ñ–º." },
        { name: "Five of Wands (5 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/9/9d/Wands05.jpg", meaning: "–ö–æ–Ω—Ñ–ª—ñ–∫—Ç, —Å—É–ø–µ—Ä–Ω–∏—Ü—Ç–≤–æ, —Ö–∞–æ—Å." },
        { name: "Six of Wands (6 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/3/3b/Wands06.jpg", meaning: "–ü–µ—Ä–µ–º–æ–≥–∞, –≤–∏–∑–Ω–∞–Ω–Ω—è, —É—Å–ø—ñ—Ö." },
        { name: "Seven of Wands (7 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/e/e4/Wands07.jpg", meaning: "–ó–∞—Ö–∏—Å—Ç, –±–æ—Ä–æ—Ç—å–±–∞, —Å—Ç—ñ–π–∫—ñ—Å—Ç—å." },
        { name: "Eight of Wands (8 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/6/6b/Wands08.jpg", meaning: "–®–≤–∏–¥–∫—ñ—Å—Ç—å, —Ä—É—Ö, –¥—ñ—è." },
        { name: "Nine of Wands (9 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/4/4d/Wands09.jpg", meaning: "–°—Ç—ñ–π–∫—ñ—Å—Ç—å, –æ–±–æ—Ä–æ–Ω–∞, –≤–∏—Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å." },
        { name: "Ten of Wands (10 –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/0/0b/Wands10.jpg", meaning: "–ü–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å, —Ç—è–≥–∞—Ä." },
        { name: "Page of Wands (–ü–∞–∂ –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/6/6a/Wands11.jpg", meaning: "–ï–Ω—Ç—É–∑—ñ–∞–∑–º, –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è, –Ω–æ–≤–∏–Ω–∏." },
        { name: "Knight of Wands (–õ–∏—Ü–∞—Ä –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/1/16/Wands12.jpg", meaning: "–ü—Ä–∏—Å—Ç—Ä–∞—Å—Ç—å, –µ–Ω–µ—Ä–≥—ñ—è, —ñ–º–ø—É–ª—å—Å–∏–≤–Ω—ñ—Å—Ç—å." },
        { name: "Queen of Wands (–ö–æ—Ä–æ–ª–µ–≤–∞ –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/0/0d/Wands13.jpg", meaning: "–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å, —Ö–∞—Ä–∏–∑–º–∞, –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å." },
        { name: "King of Wands (–ö–æ—Ä–æ–ª—å –ñ–µ–∑–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/c/ce/Wands14.jpg", meaning: "–õ—ñ–¥–µ—Ä—Å—Ç–≤–æ, –≤—ñ–∑—ñ—è, –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ." },

        // –ü–µ–Ω—Ç–∞–∫–ª—ñ (Pentacles)
        { name: "Ace of Pentacles (–¢—É–∑ –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/f/fd/Pents01.jpg", meaning: "–ù–æ–≤–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å, –ø—Ä–æ—Ü–≤—ñ—Ç–∞–Ω–Ω—è, —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å." },
        { name: "Two of Pentacles (2 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/9/9f/Pents02.jpg", meaning: "–ë–∞–ª–∞–Ω—Å, –∞–¥–∞–ø—Ç–∞—Ü—ñ—è, –∂–æ–Ω–≥–ª—é–≤–∞–Ω–Ω—è." },
        { name: "Three of Pentacles (3 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/4/42/Pents03.jpg", meaning: "–°–ø—ñ–≤–ø—Ä–∞—Ü—è, –º–∞–π—Å—Ç–µ—Ä–Ω—ñ—Å—Ç—å, —Ä–æ–±–æ—Ç–∞." },
        { name: "Four of Pentacles (4 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/3/35/Pents04.jpg", meaning: "–ö–æ–Ω—Ç—Ä–æ–ª—å, –±–µ–∑–ø–µ–∫–∞, –∂–∞–¥—ñ–±–Ω—ñ—Å—Ç—å." },
        { name: "Five of Pentacles (5 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/9/96/Pents05.jpg", meaning: "–§—ñ–Ω–∞–Ω—Å–æ–≤—ñ —Ç—Ä—É–¥–Ω–æ—â—ñ, —ñ–∑–æ–ª—è—Ü—ñ—è, –≤—Ç—Ä–∞—Ç–∞." },
        { name: "Six of Pentacles (6 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Pents06.jpg", meaning: "–©–µ–¥—Ä—ñ—Å—Ç—å, –¥–∞—Ä—É–≤–∞–Ω–Ω—è, –æ–±–º—ñ–Ω." },
        { name: "Seven of Pentacles (7 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/6/6a/Pents07.jpg", meaning: "–¢–µ—Ä–ø—ñ–Ω–Ω—è, —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è, –æ—Ü—ñ–Ω–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—É." },
        { name: "Eight of Pentacles (8 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/4/49/Pents08.jpg", meaning: "–ú–∞–π—Å—Ç–µ—Ä–Ω—ñ—Å—Ç—å, —Å—Ç–∞—Ä–∞–Ω–Ω—ñ—Å—Ç—å, –≤–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è." },
        { name: "Nine of Pentacles (9 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/f/f0/Pents09.jpg", meaning: "–î–æ—Å—Ç–∞—Ç–æ–∫, —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–Ω—ñ—Å—Ç—å, —Ä–æ–∑–∫—ñ—à." },
        { name: "Ten of Pentacles (10 –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/4/42/Pents10.jpg", meaning: "–°–ø–∞–¥—â–∏–Ω–∞, –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å, —Ä–æ–¥–∏–Ω–∞." },
        { name: "Page of Pentacles (–ü–∞–∂ –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/e/ec/Pents11.jpg", meaning: "–ê–º–±—ñ—Ü—ñ—è, –Ω–∞–≤—á–∞–Ω–Ω—è, –Ω–æ–≤—ñ –ø—Ä–æ—î–∫—Ç–∏." },
        { name: "Knight of Pentacles (–õ–∏—Ü–∞—Ä –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/d/d5/Pents12.jpg", meaning: "–ü—Ä–∞—Ü—å–æ–≤–∏—Ç—ñ—Å—Ç—å, –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å, —Ä—É—Ç–∏–Ω–∞." },
        { name: "Queen of Pentacles (–ö–æ—Ä–æ–ª–µ–≤–∞ –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/8/88/Pents13.jpg", meaning: "–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ—Å—Ç—å, —Ç—É—Ä–±–æ—Ç–∞, –¥–æ—Å—Ç–∞—Ç–æ–∫." },
        { name: "King of Pentacles (–ö–æ—Ä–æ–ª—å –ü–µ–Ω—Ç–∞–∫–ª—ñ–≤)", img: "https://upload.wikimedia.org/wikipedia/commons/1/1c/Pents14.jpg", meaning: "–ë–∞–≥–∞—Ç—Å—Ç–≤–æ, –±—ñ–∑–Ω–µ—Å, –±–µ–∑–ø–µ–∫–∞." }
    ];

    const SPREAD_TYPES = {
        "1": { name: "–ë–ª—ñ—Ü", positions: ["–í—ñ–¥–ø–æ–≤—ñ–¥—å"] },
        "3": { name: "–¢—Ä–∏ –ö–∞—Ä—Ç–∏", positions: ["–ú–∏–Ω—É–ª–µ", "–¢–µ–ø–µ—Ä—ñ—à–Ω—î", "–ú–∞–π–±—É—Ç–Ω—î"] },
        "3_alt": { name: "–†–æ–∑—É–º/–°–µ—Ä—Ü–µ/–î—ñ—ó", positions: ["–î—É–º–∫–∏", "–ü–æ—á—É—Ç—Ç—è", "–î—ñ—ó"] },
        "5": { name: "–®–ª—è—Ö", positions: ["–ó–∞—Ä–∞–∑", "–ü–µ—Ä–µ—à–∫–æ–¥–∞", "–ü—Ä–∏—Ö–æ–≤–∞–Ω–µ", "–ü–æ—Ä–∞–¥–∞", "–†–µ–∑—É–ª—å—Ç–∞—Ç"] },
        "7": { name: "–í–µ–ª–∏–∫–∞ –°–µ–º—ñ—Ä–∫–∞", positions: ["1. –û—Å–Ω–æ–≤–∞ —Å–∏—Ç—É–∞—Ü—ñ—ó", "2. –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ —Å–∏–ª–∏", "3. –ó–æ–≤–Ω—ñ—à–Ω—ñ –≤–ø–ª–∏–≤–∏", "4. –ü—Ä–∏—Ö–æ–≤–∞–Ω–µ", "5. –©–æ –∑–∞–ª–∏—à–∏—Ç–∏", "6. –©–æ –ø—Ä–∏–π–Ω—è—Ç–∏", "7. –†–µ–∑—É–ª—å—Ç–∞—Ç"] },
        "10": { 
            name: "–ö–µ–ª—å—Ç—Å—å–∫–∏–π –•—Ä–µ—Å—Ç", 
            positions: [
                "1. –°–∏—Ç—É–∞—Ü—ñ—è –∑–∞—Ä–∞–∑", 
                "2. –©–æ –ø–µ—Ä–µ—Ç–∏–Ω–∞—î (–ü—Ä–æ–±–ª–µ–º–∞)", 
                "3. –ü—ñ–¥—Å–≤—ñ–¥–æ–º–µ (–ö–æ—Ä—ñ–Ω—å)", 
                "4. –ú–∏–Ω—É–ª–µ", 
                "5. –°–≤—ñ–¥–æ–º–µ (–ú–µ—Ç–∞)", 
                "6. –ú–∞–π–±—É—Ç–Ω—î", 
                "7. –¢–∏ —Å–∞–º (–°—Ç–∞–≤–ª–µ–Ω–Ω—è)", 
                "8. –û—Ç–æ—á–µ–Ω–Ω—è", 
                "9. –ù–∞–¥—ñ—ó / –°—Ç—Ä–∞—Ö–∏", 
                "10. –ü—ñ–¥—Å—É–º–æ–∫"
            ] 
        }
    };

    let currentDeck = [];
    let drawnCards = [];
    let currentPositions = [];
    let isReadingActive = false;

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è —Å–ª–∞–π–¥–µ—Ä–∞
    document.getElementById('shuffleDuration').addEventListener('input', function(e) {
        document.getElementById('durationValue').textContent = e.target.value;
    });

    function resetAll() {
        document.getElementById('spreadArea').innerHTML = '';
        document.getElementById('outputZone').style.display = 'none';
        document.getElementById('resultText').value = '';
        document.getElementById('deckInst').style.opacity = '0';
        document.getElementById('deckContainer').classList.add('locked');
        document.getElementById('deckContainer').classList.remove('shuffling');
        isReadingActive = false;
        drawnCards = [];
        document.getElementById('countDisplay').innerText = '0';
        document.getElementById('totalDisplay').innerText = '0';
    }

    function startShuffle() {
        resetAll();
        
        const question = document.getElementById('userQuestion').value;
        if (!question.trim()) { alert("–ü–∏—Ç–∞–Ω–Ω—è —Å–ø–æ—á–∞—Ç–∫—É!"); return; }

        const selector = document.getElementById('spreadSelector');
        const spreadConfig = SPREAD_TYPES[selector.value];
        currentPositions = spreadConfig.positions;

        const deck = document.getElementById('deckContainer');
        const duration = parseFloat(document.getElementById('shuffleDuration').value) * 1000;
        
        // –î–∏–Ω–∞–º—ñ—á–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è
        const style = document.createElement('style');
        const iterations = Math.ceil(duration / 500);
        style.textContent = `
            .shuffling .c1 { animation: shuffleLeft 0.5s ease-in-out ${iterations}; }
            .shuffling .c2 { animation: shuffleRight 0.5s ease-in-out ${iterations}; }
            .shuffling .c3 { animation: shuffleLeft 0.5s ease-in-out ${iterations} reverse; }
        `;
        document.head.appendChild(style);
        
        deck.classList.add('shuffling');

        setTimeout(() => {
            deck.classList.remove('shuffling');
            deck.classList.remove('locked');
            document.head.removeChild(style);
            
            currentDeck = [...tarotDeck].sort(() => Math.random() - 0.5);
            isReadingActive = true;

            document.getElementById('deckInst').style.opacity = '1';
            updateCounter();

        }, duration);
    }

    function drawCard() {
        if (!isReadingActive) return;
        if (drawnCards.length >= currentPositions.length) return;

        const cardData = currentDeck.pop();
        const positionName = currentPositions[drawnCards.length];
        const isReversed = Math.random() < 0.5; // 50% —à–∞–Ω—Å –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–æ—ó –∫–∞—Ä—Ç–∏
        
        drawnCards.push({ ...cardData, position: positionName, reversed: isReversed });

        const cardSlot = document.createElement('div');
        cardSlot.className = 'card-slot';
        cardSlot.innerHTML = `
            <div class="position-label">${positionName}</div>
            <div class="card-inner ${isReversed ? 'reversed' : ''}" onclick="flipCard(this)">
                <div class="card-front"></div>
                <div class="card-back" style="background-image: url('${cardData.img}')"></div>
            </div>
            <div class="card-meaning ${isReversed ? 'reversed-indicator' : ''}">
                <strong>${cardData.name}</strong>
                ${cardData.meaning}
            </div>
        `;
        document.getElementById('spreadArea').appendChild(cardSlot);

        updateCounter();

        if (drawnCards.length === currentPositions.length) {
            isReadingActive = false;
            document.getElementById('deckContainer').classList.add('locked');
            document.getElementById('deckInst').innerText = "–†–æ–∑–∫–ª–∞–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –í—ñ–¥–∫—Ä–∏–≤–∞–π –∫–∞—Ä—Ç–∏!";
            generateOutput();
        }
    }

    function updateCounter() {
        document.getElementById('countDisplay').innerText = drawnCards.length;
        document.getElementById('totalDisplay').innerText = currentPositions.length;
    }

    function flipCard(element) {
        if (element.classList.contains('flipped')) return;
        element.classList.add('flipped');
        setTimeout(() => {
            element.parentElement.querySelector('.card-meaning').style.display = 'block';
        }, 300);
    }

    function generateOutput() {
        const question = document.getElementById('userQuestion').value;
        const selector = document.getElementById('spreadSelector');
        const spreadName = SPREAD_TYPES[selector.value].name;

        let text = `üîÆ –ü–∏—Ç–∞–Ω–Ω—è: ${question}\nüìã –†–æ–∑–∫–ª–∞–¥: ${spreadName}\n\n`;
        drawnCards.forEach(card => {
            const reversedLabel = card.reversed ? " (–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞)" : "";
            text += `üîπ [${card.position}]: ${card.name}${reversedLabel}\n   –°—É—Ç—å: ${card.meaning}\n\n`;
        });
        text += "--- –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ Mystic Tarot App v4.0 ---";
        
        const textArea = document.getElementById('resultText');
        textArea.value = text;
        
        textArea.style.height = 'auto';
        textArea.style.height = (textArea.scrollHeight + 10) + 'px';

        document.getElementById('outputZone').style.display = 'block';
        
        setTimeout(() => {
            document.getElementById('outputZone').scrollIntoView({ behavior: 'smooth' });
        }, 500);
    }

    function copyResult() {
        const copyText = document.getElementById("resultText");
        copyText.select();
        document.execCommand("copy");
        
        const btn = document.querySelector('.copy-btn');
        const originalText = btn.innerText;
        btn.innerText = "–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!";
        setTimeout(() => btn.innerText = originalText, 2000);
    }
</script>

</body>
</html>